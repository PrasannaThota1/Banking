{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule, Router } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction TopbarComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8)(5, \"div\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function TopbarComponent_div_5_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onLogout());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 12);\n    i0.ɵɵelement(11, \"path\", 13)(12, \"polyline\", 14)(13, \"line\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.userInitials);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.currentUser == null ? null : ctx_r0.currentUser.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.currentUser == null ? null : ctx_r0.currentUser.role);\n  }\n}\nfunction TopbarComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 16);\n    i0.ɵɵtext(1, \"Sign In\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let TopbarComponent = /*#__PURE__*/(() => {\n  class TopbarComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.isLoggedIn = false;\n      this.currentUser = null;\n      this.userInitials = '';\n    }\n    ngOnInit() {\n      this.loadUserInfo();\n    }\n    loadUserInfo() {\n      this.isLoggedIn = this.authService.isLoggedIn();\n      if (this.isLoggedIn) {\n        this.currentUser = this.authService.getCurrentUser();\n        this.userInitials = this.getInitials(this.currentUser?.name || 'User');\n      }\n    }\n    getInitials(name) {\n      return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);\n    }\n    onLogout() {\n      if (confirm('Are you sure you want to logout?')) {\n        this.authService.logout().subscribe({\n          next: () => {\n            this.isLoggedIn = false;\n            this.currentUser = null;\n            this.router.navigate(['/login']);\n          },\n          error: err => {\n            console.error('Logout error:', err);\n            // Still logout locally even if API call fails\n            localStorage.removeItem('user');\n            this.router.navigate(['/login']);\n          }\n        });\n      }\n    }\n    static {\n      this.ɵfac = function TopbarComponent_Factory(t) {\n        return new (t || TopbarComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TopbarComponent,\n        selectors: [[\"app-topbar\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 8,\n        vars: 2,\n        consts: [[1, \"topbar\"], [1, \"topbar-left\"], [1, \"topbar-right\"], [\"class\", \"user-section\", 4, \"ngIf\", \"ngIfElse\"], [\"loginPrompt\", \"\"], [1, \"user-section\"], [1, \"user-profile\"], [1, \"user-avatar\"], [1, \"user-info\"], [1, \"user-name\"], [1, \"user-role\"], [\"title\", \"Logout\", 1, \"btn-logout\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"d\", \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"], [\"points\", \"16 17 21 12 16 7\"], [\"x1\", \"21\", \"y1\", \"12\", \"x2\", \"9\", \"y2\", \"12\"], [\"routerLink\", \"/login\", 1, \"btn-link\"]],\n        template: function TopbarComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3, \"Banking App\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"div\", 2);\n            i0.ɵɵtemplate(5, TopbarComponent_div_5_Template, 14, 3, \"div\", 3)(6, TopbarComponent_ng_template_6_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            const _r2 = i0.ɵɵreference(7);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn)(\"ngIfElse\", _r2);\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, RouterModule, i2.RouterLink],\n        styles: [\".topbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;background:linear-gradient(135deg,rgba(79,70,229,.05) 0%,rgba(6,182,212,.05) 100%);border-bottom:1px solid rgba(255,255,255,.03);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.topbar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.topbar-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;background:linear-gradient(135deg,#4f46e5,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700}.topbar-right[_ngcontent-%COMP%], .user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem;border-radius:8px;cursor:pointer;transition:background .2s}.user-profile[_ngcontent-%COMP%]:hover{background:rgba(79,70,229,.1)}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#4f46e5,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:1rem}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.user-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#cbd5e1}.user-role[_ngcontent-%COMP%]{font-size:.75rem;color:#9aa6bb;text-transform:uppercase;letter-spacing:.5px}.btn-logout[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);color:#ef4444;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;padding:0;font-size:1.2rem}.btn-logout[_ngcontent-%COMP%]:hover{background:rgba(239,68,68,.2);border-color:#ef444480}.btn-logout[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-link[_ngcontent-%COMP%]{color:var(--accent);text-decoration:none;font-weight:500;padding:.5rem 1rem;border-radius:8px;transition:background .2s}.btn-link[_ngcontent-%COMP%]:hover{background:rgba(79,70,229,.1)}@media (max-width: 768px){.topbar[_ngcontent-%COMP%]{padding:1rem}.topbar-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.user-profile[_ngcontent-%COMP%]{gap:.5rem}.user-info[_ngcontent-%COMP%]{display:none}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;font-size:.9rem}}\"]\n      });\n    }\n  }\n  return TopbarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}